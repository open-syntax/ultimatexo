name: Mark Stale Issues and PRs

on:
  schedule:
    # Run daily at 1 AM UTC
    - cron: '0 1 * * *'
  workflow_dispatch:

permissions:
  issues: write
  pull-requests: write

jobs:
  stale:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/stale@v10
        with:
          repo-token: ${{ secrets.GITHUB_TOKEN }}
          
          # Issue settings
          days-before-issue-stale: 60
          days-before-issue-close: 14
          stale-issue-label: 'stale'
          exempt-issue-labels: 'pinned,security,bug,enhancement,good-first-issue'
          stale-issue-message: >
            This issue has been automatically marked as stale because it has not had
            recent activity. It will be closed in 14 days if no further activity occurs.
            Thank you for your contributions.
          close-issue-message: >
            This issue has been automatically closed due to inactivity. If you believe
            this is still relevant, please reopen the issue or create a new one with
            updated information.
          close-issue-reason: 'not_planned'
          
          # PR settings
          days-before-pr-stale: 30
          days-before-pr-close: 7
          stale-pr-label: 'stale'
          exempt-pr-labels: 'pinned,security'
          stale-pr-message: >
            This pull request has been automatically marked as stale because it has not had
            recent activity. It will be closed in 7 days if no further activity occurs.
            Please update the PR or respond if you plan to continue working on this.
          close-pr-message: >
            This pull request has been automatically closed due to inactivity.
            Feel free to reopen if you want to continue working on this.
          
          # General settings
          operations-per-run: 100
          remove-stale-when-updated: true
          ascending: true
          
          # Don't mark issues/PRs with these labels as stale
          exempt-all-milestones: true
          exempt-draft-pr: true
